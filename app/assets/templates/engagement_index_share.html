<div data-ng-cloak data-ng-controller="EngagementIndexController" class="dc-engagement-index" autoscroll="false">

  <div class="dc-main">

    <h2>Engagement Index</h2>

    <div class="dc-disclaimer alert alert-info">
      <p><strong>Disclaimer: </strong>Some activity points (e.g. Discussions) may not show up immediately on the Engagement Index.</p>
    </div>

    <!-- Student Score Info -->
    <div class="dc-user-info">
      <span class="dc-user-info-text dc-user-info-text-points"><strong>Your Points: </strong><span data-ng-bind="currStudent.points"></span></span>
      <span class="dc-user-info-text"><strong>Your Percentile: </strong><span data-ng-bind="currStudent.studentPercentile"></span></span>
      <span class="dc-user-info-text"><strong>Last Point Earned: </strong><span data-ng-bind="currStudent.last_activity_date"></span></span>
    </div><!-- End of student score info -->

    <div class="dc-score-jump-link"><a data-ng-click="gotoBottom()" class="dc-mouse-pointer">Go to my score &darr;</a></div>

    <hr />

    <!-- Filter Controls -->
    <div class="dc-sort-controls">
      <form class="form-inline">
        <!-- Filter search by student & course section -->
        <input type="text" class="dc-engagement-search" placeholder="Search for student..." data-ng-model="search.$">
        <input type="text" class="dc-engagement-search dc-engagement-search-section" placeholder="Filter by section..." data-ng-model="search.section">
      </form><!-- End of form -->
    </div><!-- End of dc-sort-controls -->

    <!-- Engagement Index Table: For Students who SHARED -->
    <table class="table table-striped table-bordered dc-table-striped-border dc-table-margin">
      <thead class="dc-header-color">
        <tr class="dc-pointer-hand dc-header-title">
          <th data-ng-click="predicate='sortable_name'; reverse=!reverse; showcaretStudent=!showcaretStudent" data-ng-class="{ dropup: showcaretStudent }">Student <span class="caret"></span></th>
          <th data-ng-click="predicate='section'; reverse=!reverse; showcaretSection=!showcaretSection" data-ng-class="{ dropup: showcaretSection }">Section <span class="caret"></span></th>
          <th>Share</th>
          <th data-ng-click="predicate='points'; reverse=!reverse; showcaretPoints=!showcaretPoints" data-ng-class="{ dropup: showcaretPoints }">Points <span class="caret"></span></th>
          <th data-ng-click="predicate='points'; reverse=!reverse; showcaretPercentile=!showcaretPercentile" data-ng-class="{ dropup: showcaretPercentile }">Percentile <span class="caret"></span></th>
          <th data-ng-click="predicate='last_activity_date'; reverse=!reverse; showcaretLastPoint=!showcaretLastPoint" data-ng-class="{ dropup: showcaretLastPoint }">Last Point Earned <span class="caret"></span></th>
        </tr>
      </thead>
      <tbody>
        <tr id="{{student.id}}" data-ng-repeat="student in showStudents | orderBy:predicate:!reverse | filter:search:strict" data-ng-class="{'info': student.highlight}" data-ng-show="visibility">
          <td class="col-sm-2" data-ng-bind="student.name"></td>
          <td class="col-sm-2" data-ng-bind="student.section"></td>
          <td class="col-sm-2" data-ng-bind="student.share"></td>
          <td class="col-sm-2" data-ng-bind="student.points"></td>
          <td class="col-sm-2" data-ng-bind="student.studentPercentile"></td>
          <td class="col-sm-3" data-ng-bind="student.last_activity_date"></td>
        </tr>
      </tbody>
    </table><!-- End of Engagement Index Table -->

    <!-- Engagement Index Table: For Students who NOT SHARED-->
    <div class="dc-table-unshare-title">
      <p>Students Not Sharing Score</p>
    </div>
    <table class="table table-striped table-bordered dc-table-striped-border dc-table-unshare-margin">
      <thead class="dc-header-color">
        <tr>
          <th>Student</th>
          <th>Section</th>
          <th>Share</th>
        </tr>
      </thead>
      <tbody>
        <tr data-ng-repeat="student in noshowStudents | orderBy:predicateUnshare" data-ng-show="visibility">
          <td class="col-sm-2" data-ng-bind="student.name"></td>
          <td class="col-sm-2" data-ng-bind="student.section"></td>
          <td class="col-sm-2" data-ng-bind="student.share"></td>
        </tr>
      </tbody>
    </table><!-- End of Engagement Index Table -->

  </div><!-- End of main div -->
</div><!-- End of dc-engagement-index -->
